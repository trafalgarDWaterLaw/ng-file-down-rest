!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-file-down-rest",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ng-file-down-rest"]={},e.ng.core,e.ng.common)}(this,(function(e,t,n){"use strict";var o=function(){function e(){}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),s=function(){function e(e){this.document=e,this.methodType="GET",this.tagName="Download",this.response=new t.EventEmitter,this.blobUrl="",this.message={success:!0}}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.styleCss?this.anchorElement.nativeElement.style=this.styleCss:this.anchorElement.nativeElement.style.color="#6475FF"},e.prototype.handleDownload=function(e){"POST"===this.methodType?(e.preventDefault(),this.urlPath&&this.makeApiCall()):this.response.emit(this.message)},e.prototype.makeApiCall=function(){var e=new XMLHttpRequest;e.open("POST",this.urlPath);var t={};if(this.header&&(t=JSON.parse(this.header)),t)for(var n in t)e.setRequestHeader(""+n,""+t[n]);else e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("cache-control","no-cache");e.responseType="blob";var o=this;e.onreadystatechange=function(){if(4===this.readyState){var t=e.getResponseHeader("Content-Type")?e.getResponseHeader("Content-Type"):"text/plain";if(t){var n=new Blob([this.response],{type:t});o.makeAmends(n,o)}}};var s=this.params;s&&e.send(s)},e.prototype.makeAmends=function(e,t){t.blobUrl=window.URL.createObjectURL(e),window.open(t.blobUrl),this.response.emit(this.message)},e.prototype.ngOnDestroy=function(){window.URL.revokeObjectURL(this.blobUrl),this.urlPath="",this.methodType="GET",this.params="",this.header={},this.tagName="Download",this.styleCss="",this.blobUrl="",this.message={success:!0}},e.decorators=[{type:t.Component,args:[{selector:"ng-file-down-rest",template:'<a #ngFileLinkRest href="{{urlPath}}" (click)="handleDownload($event)">{{tagName}}<a></a>'}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[n.DOCUMENT]}]}]},e.propDecorators={urlPath:[{type:t.Input}],methodType:[{type:t.Input}],params:[{type:t.Input}],header:[{type:t.Input}],tagName:[{type:t.Input}],styleCss:[{type:t.Input}],response:[{type:t.Output}],anchorElement:[{type:t.ViewChild,args:["ngFileLinkRest",{static:!1}]}]},e}();var r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[s],imports:[],exports:[s]}]}],e}();e.NgFileDownRestComponent=s,e.NgFileDownRestModule=r,e.NgFileDownRestService=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-file-down-rest.umd.min.js.map